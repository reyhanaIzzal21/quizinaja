<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Website - SPA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .option-btn {
            transition: all 0.2s;
        }

        .option-btn:hover {
            transform: translateX(5px);
        }

        .correct {
            background-color: #10b981 !important;
            color: white !important;
        }

        .incorrect {
            background-color: #ef4444 !important;
            color: white !important;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">
    <!-- Navbar -->
    <nav class="bg-indigo-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <h1 class="text-2xl font-bold cursor-pointer" onclick="app.router.navigate('home')">üéì Quiz Master</h1>
                <div id="nav-info" class="text-sm"></div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app" class="container mx-auto px-4 py-8">
        <!-- Content will be dynamically loaded here -->
    </main>

    <script>
        // ============================================
        // DATA - Quiz Database
        // ============================================
        const quizData = {
            categories: [
                {
                    id: 'matematika',
                    name: 'Matematika',
                    icon: 'üî¢',
                    description: 'Uji kemampuan matematika Anda',
                    quizzes: [
                        {
                            id: 'aljabar',
                            title: 'Quiz Aljabar',
                            description: 'Soal-soal aljabar dasar',
                            questions: [
                                {
                                    question: 'Berapakah hasil dari 2x + 5 = 15?',
                                    options: ['x = 5', 'x = 10', 'x = 7', 'x = 8'],
                                    answer: 'A'
                                },
                                {
                                    question: 'Jika 3y - 7 = 14, maka nilai y adalah?',
                                    options: ['y = 5', 'y = 7', 'y = 9', 'y = 11'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Hasil dari (x + 3)(x - 3) adalah?',
                                    options: ['x¬≤ - 9', 'x¬≤ + 9', 'x¬≤ - 6', 'x¬≤ + 6'],
                                    answer: 'A'
                                },
                                {
                                    question: 'Jika a¬≤ = 64, maka nilai a adalah?',
                                    options: ['¬±6', '¬±8', '¬±10', '¬±12'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Berapakah hasil dari 5(2x + 3)?',
                                    options: ['10x + 3', '7x + 8', '10x + 15', '5x + 15'],
                                    answer: 'C'
                                }
                            ]
                        },
                        {
                            id: 'geometri',
                            title: 'Quiz Geometri',
                            description: 'Soal-soal geometri',
                            questions: [
                                {
                                    question: 'Luas lingkaran dengan jari-jari 7 cm adalah? (œÄ = 22/7)',
                                    options: ['144 cm¬≤', '154 cm¬≤', '164 cm¬≤', '174 cm¬≤'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Keliling persegi dengan sisi 12 cm adalah?',
                                    options: ['36 cm', '48 cm', '60 cm', '72 cm'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Volume kubus dengan rusuk 5 cm adalah?',
                                    options: ['100 cm¬≥', '125 cm¬≥', '150 cm¬≥', '175 cm¬≥'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Luas segitiga dengan alas 10 cm dan tinggi 8 cm adalah?',
                                    options: ['30 cm¬≤', '40 cm¬≤', '50 cm¬≤', '80 cm¬≤'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Sudut dalam segitiga sama sisi adalah?',
                                    options: ['45¬∞', '60¬∞', '90¬∞', '120¬∞'],
                                    answer: 'B'
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 'bahasa-indonesia',
                    name: 'Bahasa Indonesia',
                    icon: 'üìö',
                    description: 'Uji kemampuan bahasa Indonesia Anda',
                    quizzes: [
                        {
                            id: 'teks-laporan',
                            title: 'Quiz Teks Laporan Hasil Observasi',
                            description: 'Soal tentang teks laporan',
                            questions: [
                                {
                                    question: 'Teks laporan hasil observasi bersifat?',
                                    options: ['Objektif dan faktual', 'Subjektif dan imajinatif', 'Persuasif', 'Naratif'],
                                    answer: 'A'
                                },
                                {
                                    question: 'Struktur teks laporan hasil observasi yang benar adalah?',
                                    options: ['Orientasi - Komplikasi - Resolusi', 'Pernyataan umum - Deskripsi bagian - Simpulan', 'Tesis - Argumentasi - Penegasan', 'Pengenalan - Isi - Penutup'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Ciri kebahasaan teks laporan hasil observasi adalah?',
                                    options: ['Menggunakan kata kerja aktif', 'Menggunakan istilah teknis', 'Menggunakan kata sambung temporal', 'Menggunakan kata ganti orang pertama'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Tujuan teks laporan hasil observasi adalah?',
                                    options: ['Menghibur pembaca', 'Menyampaikan informasi faktual', 'Membujuk pembaca', 'Menceritakan pengalaman'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Bagian yang berisi klasifikasi objek dalam teks laporan adalah?',
                                    options: ['Orientasi', 'Deskripsi bagian', 'Komplikasi', 'Resolusi'],
                                    answer: 'B'
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 'fisika',
                    name: 'Fisika',
                    icon: '‚öõÔ∏è',
                    description: 'Uji pemahaman konsep fisika Anda',
                    quizzes: [
                        {
                            id: 'gerak-lurus',
                            title: 'Quiz Gerak Lurus',
                            description: 'Soal-soal gerak lurus',
                            questions: [
                                {
                                    question: 'Rumus kecepatan adalah?',
                                    options: ['v = s/t', 'v = s √ó t', 'v = t/s', 'v = s + t'],
                                    answer: 'A'
                                },
                                {
                                    question: 'Satuan percepatan dalam SI adalah?',
                                    options: ['m/s', 'm/s¬≤', 'km/jam', 'cm/s'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Sebuah mobil bergerak dengan kecepatan 20 m/s selama 5 sekon. Jarak yang ditempuh adalah?',
                                    options: ['50 m', '75 m', '100 m', '125 m'],
                                    answer: 'C'
                                },
                                {
                                    question: 'Gerak lurus beraturan (GLB) memiliki ciri?',
                                    options: ['Kecepatan berubah', 'Percepatan konstan', 'Kecepatan konstan', 'Percepatan nol dan kecepatan nol'],
                                    answer: 'C'
                                },
                                {
                                    question: 'Pada GLBB, grafik v terhadap t berbentuk?',
                                    options: ['Garis lurus horizontal', 'Garis lurus miring', 'Parabola', 'Lingkaran'],
                                    answer: 'B'
                                }
                            ]
                        },
                        {
                            id: 'energi',
                            title: 'Quiz Energi dan Usaha',
                            description: 'Soal tentang energi',
                            questions: [
                                {
                                    question: 'Satuan energi dalam SI adalah?',
                                    options: ['Watt', 'Joule', 'Newton', 'Pascal'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Rumus energi kinetik adalah?',
                                    options: ['Ek = mgh', 'Ek = ¬Ωmv¬≤', 'Ek = Fs', 'Ek = mc¬≤'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Hukum kekekalan energi menyatakan?',
                                    options: ['Energi selalu bertambah', 'Energi selalu berkurang', 'Energi tidak dapat diciptakan atau dimusnahkan', 'Energi selalu konstan'],
                                    answer: 'C'
                                },
                                {
                                    question: 'Usaha yang dilakukan gaya adalah nol jika?',
                                    options: ['Gaya searah perpindahan', 'Gaya tegak lurus perpindahan', 'Gaya berlawanan arah perpindahan', 'Tidak ada gaya'],
                                    answer: 'B'
                                },
                                {
                                    question: 'Daya adalah?',
                                    options: ['Usaha per satuan waktu', 'Gaya kali jarak', 'Massa kali percepatan', 'Energi potensial'],
                                    answer: 'A'
                                }
                            ]
                        }
                    ]
                }
            ]
        };
 
        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        const Utils = {
            shuffle: function (array) {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                }
                return newArray;
            },

            getCategory: function (categoryId) {
                return quizData.categories.find(cat => cat.id === categoryId);
            },

            getQuiz: function (categoryId, quizId) {
                const category = this.getCategory(categoryId);
                return category ? category.quizzes.find(q => q.id === quizId) : null;
            }
        };

        // ============================================
        // ROUTER
        // ============================================
        const Router = {
            currentRoute: 'home',
            params: {},

            navigate: function (route, params = {}) {
                this.currentRoute = route;
                this.params = params;
                this.render();
            },

            render: function () {
                const appElement = document.getElementById('app');
                appElement.innerHTML = '';
                appElement.className = 'container mx-auto px-4 py-8 fade-in';

                switch (this.currentRoute) {
                    case 'home':
                        Components.Home.render(appElement);
                        break;
                    case 'quizList':
                        Components.QuizList.render(appElement, this.params.categoryId);
                        break;
                    case 'quiz':
                        Components.QuizPage.render(appElement, this.params.categoryId, this.params.quizId);
                        break;
                    case 'result':
                        Components.Result.render(appElement, this.params.score, this.params.total);
                        break;
                    default:
                        Components.Home.render(appElement);
                }
            }
        };

        // ============================================
        // COMPONENTS
        // ============================================
        const Components = {
            // HOME COMPONENT
            Home: {
                render: function (container) {
                    container.innerHTML = `
                        <div class="text-center mb-12">
                            <h2 class="text-4xl font-bold text-gray-800 mb-4">Selamat Datang di Quiz Master! üéì</h2>
                            <p class="text-gray-600 text-lg">Pilih kategori quiz untuk memulai</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${quizData.categories.map(category => `
                                <div class="bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition cursor-pointer transform hover:-translate-y-1"
                                     onclick="app.router.navigate('quizList', {categoryId: '${category.id}'})">
                                    <div class="text-5xl mb-4">${category.icon}</div>
                                    <h3 class="text-2xl font-bold text-gray-800 mb-2">${category.name}</h3>
                                    <p class="text-gray-600 mb-4">${category.description}</p>
                                    <div class="text-indigo-600 font-semibold">${category.quizzes.length} Quiz tersedia ‚Üí</div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
            },

            // QUIZ LIST COMPONENT
            QuizList: {
                render: function (container, categoryId) {
                    const category = Utils.getCategory(categoryId);
                    if (!category) {
                        container.innerHTML = '<p class="text-red-500">Kategori tidak ditemukan</p>';
                        return;
                    }

                    container.innerHTML = `
                        <button onclick="app.router.navigate('home')" 
                                class="mb-6 text-indigo-600 hover:text-indigo-800 font-semibold flex items-center">
                            ‚Üê Kembali ke Kategori
                        </button>
                        
                        <div class="text-center mb-12">
                            <div class="text-6xl mb-4">${category.icon}</div>
                            <h2 class="text-4xl font-bold text-gray-800 mb-2">${category.name}</h2>
                            <p class="text-gray-600">${category.description}</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            ${category.quizzes.map(quiz => `
                                <div class="bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition">
                                    <h3 class="text-2xl font-bold text-gray-800 mb-2">${quiz.title}</h3>
                                    <p class="text-gray-600 mb-4">${quiz.description}</p>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-500">${quiz.questions.length} Soal</span>
                                        <button onclick="app.router.navigate('quiz', {categoryId: '${categoryId}', quizId: '${quiz.id}'})"
                                                class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition font-semibold">
                                            Mulai Quiz
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
            },

            // QUIZ PAGE COMPONENT
            QuizPage: {
                currentQuestionIndex: 0,
                shuffledQuestions: [],
                userAnswers: [],
                answered: false,

                render: function (container, categoryId, quizId) {
                    const quiz = Utils.getQuiz(categoryId, quizId);
                    if (!quiz) {
                        container.innerHTML = '<p class="text-red-500">Quiz tidak ditemukan</p>';
                        return;
                    }

                    // Shuffle questions on first load
                    if (this.currentQuestionIndex === 0) {
                        this.shuffledQuestions = Utils.shuffle(quiz.questions);
                        this.userAnswers = [];
                        this.answered = false;
                    }

                    const question = this.shuffledQuestions[this.currentQuestionIndex];
                    const progress = ((this.currentQuestionIndex + 1) / this.shuffledQuestions.length) * 100;

                    container.innerHTML = `
                        <div class="max-w-3xl mx-auto">
                            <div class="bg-white rounded-lg shadow-lg p-8">
                                <div class="mb-6">
                                    <div class="flex justify-between items-center mb-2">
                                        <h2 class="text-2xl font-bold text-gray-800">${quiz.title}</h2>
                                        <span class="text-gray-600 font-semibold">Soal ${this.currentQuestionIndex + 1}/${this.shuffledQuestions.length}</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-3">
                                        <div class="bg-indigo-600 h-3 rounded-full transition-all" style="width: ${progress}%"></div>
                                    </div>
                                </div>

                                <div class="mb-8">
                                    <h3 class="text-xl font-semibold text-gray-800 mb-6">${question.question}</h3>
                                    <div class="space-y-3">
                                        ${question.options.map((option, index) => {
                        const letter = String.fromCharCode(65 + index);
                        return `
                                                <button id="option-${letter}" 
                                                        onclick="app.components.QuizPage.selectAnswer('${letter}')"
                                                        class="option-btn w-full text-left p-4 rounded-lg border-2 border-gray-300 hover:border-indigo-500 hover:bg-indigo-50 transition">
                                                    <span class="font-bold text-indigo-600">${letter}.</span> ${option}
                                                </button>
                                            `;
                    }).join('')}
                                    </div>
                                </div>

                                <div class="flex justify-between">
                                    ${this.currentQuestionIndex > 0 ? `
                                        <button onclick="app.components.QuizPage.previousQuestion('${categoryId}', '${quizId}')"
                                                class="bg-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-400 transition font-semibold">
                                            ‚Üê Sebelumnya
                                        </button>
                                    ` : '<div></div>'}
                                    
                                    <button id="next-btn" onclick="app.components.QuizPage.nextQuestion('${categoryId}', '${quizId}')"
                                            class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed"
                                            disabled>
                                        ${this.currentQuestionIndex === this.shuffledQuestions.length - 1 ? 'Selesai' : 'Selanjutnya ‚Üí'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;

                    // Restore previous answer if exists
                    if (this.userAnswers[this.currentQuestionIndex]) {
                        const prevAnswer = this.userAnswers[this.currentQuestionIndex];
                        const btn = document.getElementById(`option-${prevAnswer}`);
                        if (btn) {
                            btn.classList.add('bg-indigo-100', 'border-indigo-500');
                            document.getElementById('next-btn').disabled = false;
                        }
                    }
                },

                selectAnswer: function (letter) {
                    if (this.answered) return;

                    // Remove previous selection
                    document.querySelectorAll('.option-btn').forEach(btn => {
                        btn.classList.remove('bg-indigo-100', 'border-indigo-500');
                    });

                    // Highlight selected
                    const selectedBtn = document.getElementById(`option-${letter}`);
                    selectedBtn.classList.add('bg-indigo-100', 'border-indigo-500');

                    // Store answer
                    this.userAnswers[this.currentQuestionIndex] = letter;

                    // Enable next button
                    document.getElementById('next-btn').disabled = false;
                },

                nextQuestion: function (categoryId, quizId) {
                    if (this.currentQuestionIndex < this.shuffledQuestions.length - 1) {
                        this.currentQuestionIndex++;
                        this.answered = false;
                        this.render(document.getElementById('app'), categoryId, quizId);
                    } else {
                        // Calculate score
                        let score = 0;
                        this.shuffledQuestions.forEach((q, index) => {
                            if (this.userAnswers[index] === q.answer) {
                                score++;
                            }
                        });

                        // Reset for next quiz
                        this.currentQuestionIndex = 0;
                        this.shuffledQuestions = [];
                        this.userAnswers = [];

                        // Navigate to result
                        app.router.navigate('result', {
                            score: score,
                            total: this.shuffledQuestions.length || 5
                        });
                    }
                },

                previousQuestion: function (categoryId, quizId) {
                    if (this.currentQuestionIndex > 0) {
                        this.currentQuestionIndex--;
                        this.answered = false;
                        this.render(document.getElementById('app'), categoryId, quizId);
                    }
                }
            },

            // RESULT COMPONENT
            Result: {
                render: function (container, score, total) {
                    const percentage = (score / total) * 100;
                    let grade, message, color;

                    if (percentage >= 80) {
                        grade = 'Excellent! üåü';
                        message = 'Luar biasa! Anda menguasai materi dengan sangat baik!';
                        color = 'text-green-600';
                    } else if (percentage >= 60) {
                        grade = 'Good! üëç';
                        message = 'Bagus! Terus tingkatkan pemahaman Anda!';
                        color = 'text-blue-600';
                    } else {
                        grade = 'Keep Learning! üìö';
                        message = 'Jangan menyerah! Terus belajar dan coba lagi!';
                        color = 'text-orange-600';
                    }

                    container.innerHTML = `
                        <div class="max-w-2xl mx-auto">
                            <div class="bg-white rounded-lg shadow-lg p-8 text-center">
                                <h2 class="text-4xl font-bold ${color} mb-4">${grade}</h2>
                                <div class="text-6xl font-bold text-gray-800 mb-4">
                                    ${score}/${total}
                                </div>
                                <p class="text-xl text-gray-600 mb-8">${message}</p>
                                <div class="mb-8">
                                    <div class="w-full bg-gray-200 rounded-full h-6">
                                        <div class="bg-gradient-to-r from-indigo-600 to-purple-600 h-6 rounded-full transition-all flex items-center justify-center text-white font-bold" 
                                             style="width: ${percentage}%">
                                            ${percentage.toFixed(0)}%
                                        </div>
                                    </div>
                                </div>
                                <div class="space-x-4">
                                    <button onclick="app.router.navigate('home')"
                                            class="bg-indigo-600 text-white px-8 py-3 rounded-lg hover:bg-indigo-700 transition font-semibold">
                                        Kembali ke Home
                                    </button>
                                    <button onclick="location.reload()"
                                            class="bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 transition font-semibold">
                                        Coba Quiz Lain
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
        };

        // ============================================
        // APP INITIALIZATION
        // ============================================
        const app = {
            router: Router,
            components: Components,
            utils: Utils,

            init: function () {
                this.router.navigate('home');
            }
        };

        // Start the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
    </script>
</body>

</html>